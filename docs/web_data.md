# Web data exports

The website reads JSON artifacts generated by `scripts/85_export_web_data.R` into `site/public/data/`.
All tabular files use a compact format to minimize repeated keys:

```json
{
  "columns": ["col_a", "col_b"],
  "rows": [
    ["value_a1", "value_b1"],
    ["value_a2", "value_b2"]
  ]
}
```

## indices.json
Compact table of combined pillar indices.

**Columns**
- `iso3` (string): ISO3 country code.
- `country` (string): display name.
- `tech` (string): technology group.
- `supply_chain` (string): supply-chain stage.
- `sub_sector` (string, optional): sub-sector, if enabled in the pipeline.
- `energy_security_index` (number): Energy Security index value.
- `economic_opportunity_index` (number): Economic Opportunity index value.

## category_contributions.json
Compact table of category-level contributions by pillar.

**Columns**
- `iso3` (string): ISO3 country code.
- `country` (string): display name.
- `tech` (string): technology group.
- `supply_chain` (string): supply-chain stage.
- `sub_sector` (string, optional): sub-sector, if enabled in the pipeline.
- `pillar` (string): pillar label (`Energy security` or `Economic opportunity`).
- `category` (string): category name.
- `category_score` (number): category score.
- `category_weight` (number): normalized category weight.
- `weighted_category_contribution` (number): weighted contribution to the pillar index.

## scatter_points.json
Compact table of points for the scatter plot (meaned across tech/supply-chain for each ISO3).

**Columns**
- `iso3` (string): ISO3 country code.
- `x` (number): Economic Opportunity index value.
- `y` (number): Energy Security index value.

## latest_year.json
Single-object payload describing the latest available year across input tables.

```json
{ "year": 2024 }
```

## countries.geojson
GeoJSON FeatureCollection clipped to ISO3s present in the indices export. Each feature includes:

- `properties.iso3` (string): ISO3 country code.
- `properties.name` (string): country display name from Natural Earth.
- `geometry`: Natural Earth polygon geometry.

The source polygons are stored in `site/public/geo/ne_110m_admin_0_countries.geojson` and are trimmed
at export time.
